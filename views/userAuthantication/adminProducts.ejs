<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include("../layouts/bootstrapStyle.ejs")%>
    <link rel="stylesheet" href="/styles/adminProducts.css" />
    <link rel="stylesheet" href="/styles/mainProducts.css" />
    <title>Admin Products</title>
  </head>

  <body>
    <%- include("../layouts/headerAndFooter/adminPanelHeader.ejs")%>

    <main>
      <!-- Here are showed collections -->
      <section class="container d-flex flex-column">
        <section class="buttons my-2">
          <div class="d-flex justify-content-end">
            <a href="/admin/products/createProduct" class="btn btn-info text-light">НОВ ПРОДУКТ</a>
          </div>
        </section>

        <section class="productsItems">
          <table class="table table-hover">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col" >Секция</th>
                <th scope="col">Показаното име</th>
                <th scope="col">Под Секции/я</th>
                <th scope="col" class="text-center">Премахни</th>
              </tr>
            </thead>
            <tbody >
            
              <%allProducts.forEach((item,index)=>{%>
                  <tr class="tableRow" id="<%=item._id%>">
                    <th scope="row">
                      <%=index%>
                    </th>
                    <td><%=item.name%></td>
                    <td><%=item.nameToDisplay%></td>
                   <td>
                     <ul>
                       <%item.subsection.forEach((subItem,subIndex)=>{%>
                        <li>
                          <%=subItem.nameToDisplay%>
                        </li>
                     <%})%>
                     
                    </ul></td>
                    <td class="text-center">
                      <a href="#" class="removeItem"><i class="fas fa-trash-alt"></i></a>
                  </td>
                  </tr>
              
              <%})%>
       
            
            </tbody>
          </table>
        </section>
      </section>
     
    </main>
  </body>
  <%- include("../layouts/bootstrapScripts.ejs")%> 
  <%- include("../layouts/headerAndFooter/adminPanelScripts.ejs") %>

  <script>
    $(document).ready(() => {
      $(".tableRow")
      $(".tableRow").click(function(){
        const itemId = $(this).attr("id")
        window.location = `/admin/products/${itemId}/show`
      })
     
    });
  </script>
  <%- include("../layouts/headerAndFooter/adminPanelHeaderFunc.js")%>

</html>
